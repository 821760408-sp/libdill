<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>libdill</title>
  <link rel="stylesheet" type="text/css" href="http://libdill.org/main.css">
</head>
<body>

<h1>libdill: Structured Concurrency for C</h1>

<ul id='toplist'>
<li><a href="http://libdill.org/index.html">Home</a></li>
<li><a href="http://libdill.org/download.html">Download</a></li>
<li><a href="http://libdill.org/documentation.html">Documentation</a></li>
<li><a href="http://libdill.org/tutorial.html">Tutorials</a></li>
</ul>
<h1 id="name">NAME</h1>
<p>udp_open_mem - opens a UDP socket in a user-supplied memory</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p><strong>#include &lt;libdill.h&gt;</strong></p>
<p><strong>int udp_open_mem(struct ipaddr </strong>*<em>local</em><strong>, const struct ipaddr </strong>*<em>remote</em><strong>, void </strong>*<em>mem</em><strong>);</strong></p>
<h1 id="description">DESCRIPTION</h1>
<p>UDP is an unreliable message-based protocol. The size of the message is limited. The protocol has no initial or terminal handshake. A single socket can be used to different destinations.</p>
<p>This function creates a UDP socket in a user-supplied memory. Unless you are hyper-optimizing use <strong>udp_open()</strong> instead.</p>
<p>IP address passed in <em>local</em> argument will be used to set source IP address in outgoing packets. Also, the socket can be used to receive packets sent to this address. If port in the address is set to zero an ephemeral port will be chosen and filled into the <em>local</em> address.</p>
<p>IP address passed in <em>remote</em> is the default destination for outbound packets. It is used by <strong>msend()</strong> and <strong>mrecv()</strong> functions which don't allow for specifying the destination address explicitly. It is also used by <strong>udp_send()</strong> and <strong>udp_sendl()</strong> functions if the address parameter of those functions is set to NULL.</p>
<p>The memory passed in <em>mem</em> argument must be at least <em>UDP_SIZE</em> bytes long and can be deallocated only after the socket is closed.</p>
<h1 id="return-value">RETURN VALUE</h1>
<p>Newly created socket handle. On error, it returns -1 and sets <em>errno</em> to one of the values below.</p>
<h1 id="errors">ERRORS</h1>
<ul>
<li><strong>EADDRINUSE</strong>: The local address is already in use.<br /></li>
<li><strong>EADDRNOTAVAIL</strong>: The specified address is not available from the local machine.<br /></li>
<li><strong>ECANCELED</strong>: Current coroutine is being shut down.<br /></li>
<li><strong>EINVAL</strong>: Invalid arguments.<br /></li>
<li><strong>EMFILE</strong>: The maximum number of file descriptors in the process are already open.<br /></li>
<li><strong>ENFILE</strong>: The maximum number of file descriptors in the system are already open.<br /></li>
<li><strong>ENOMEM</strong>: Not enough memory.</li>
</ul>
<h1 id="example">EXAMPLE</h1>
<pre><code>struct ipaddr addr;
int rc = ipaddr_local(&amp;addr, NULL, 5555, 0);
char mem[UDP_SIZE];
int s = udp_open_mem(&amp;addr, NULL, mem);</code></pre>
</body>
