<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>libdill</title>
  <link rel="stylesheet" type="text/css" href="http://libdill.org/main.css">
</head>
<body>

<h1>libdill: Structured Concurrency for C</h1>

<ul id='toplist'>
<li><a href="http://libdill.org/index.html">Home</a></li>
<li><a href="http://libdill.org/download.html">Download</a></li>
<li><a href="http://libdill.org/documentation.html">Documentation</a></li>
<li><a href="http://libdill.org/tutorial.html">Tutorials</a></li>
</ul>
<h1 id="name">NAME</h1>
<p>hctrl - coroutine's control channel</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p><strong>#include &lt;libdill.h&gt;</strong></p>
<p><strong>int hctrl;</strong></p>
<h1 id="description">DESCRIPTION</h1>
<p>As a convenience measure, each coroutine comes with a built-in control channel. The channel has perfectly standard semantics and you can use it to communicate with the coroutine. The channel is automatically deallocated when coroutine's handle is closed.</p>
<p>From inside of the coroutine the control channel is accessible via <em>hctrl</em> handle.</p>
<p>From outside of the coroutine you can do channel operations (e.g. <em>chsend</em>) directly on the coroutine handle.</p>
<h1 id="example">EXAMPLE</h1>
<pre class="sourceCode c"><code class="sourceCode c">coroutine <span class="dt">void</span> worker(<span class="dt">void</span>) {
    chrecv(hctrl, NULL, <span class="dv">0</span>, -<span class="dv">1</span>);
    chsend(hctrl, NULL, <span class="dv">0</span>, -<span class="dv">1</span>);
}

<span class="dt">int</span> main(<span class="dt">void</span>) {
    <span class="co">/* Do a handshake with the child coroutine using zero-byte messages. */</span>
    <span class="dt">int</span> h = go(worker());
    chsend(h, NULL, <span class="dv">0</span>, -<span class="dv">1</span>);
    chrecv(h, NULL, <span class="dv">0</span>, -<span class="dv">1</span>);
    hclose(h);
    <span class="kw">return</span> <span class="dv">0</span>;
}</code></pre>
</body>
