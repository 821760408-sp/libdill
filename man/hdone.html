<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>libdill</title>
  <link rel="stylesheet" type="text/css" href="http://libdill.org/main.css">
</head>
<body>

<h1>libdill: Structured Concurrency for C</h1>

<ul id='toplist'>
<li><a href="http://libdill.org/index.html">Home</a></li>
<li><a href="http://libdill.org/download.html">Download</a></li>
<li><a href="http://libdill.org/documentation.html">Documentation</a></li>
<li><a href="http://libdill.org/tutorial.html">Tutorials</a></li>
</ul>
<h1 id="name">NAME</h1>
<p>hdone - announce end of input to a handle</p>
<h1 id="synopsis">SYNOPSIS</h1>
<p><strong>#include</strong> <strong>&lt;libdill.h&gt;</strong></p>
<p><strong>int hdone(int</strong> <em>h</em><strong>, int64_t</strong> <em>deadline</em><strong>);</strong></p>
<h1 id="description">DESCRIPTION</h1>
<p>This function is used to inform the handle that there will be no more input. This gives it time to finish it's work and possibly inform the user when it is safe to close the handle.</p>
<p>For example, in case of TCP protocol handle, <strong>hdone</strong> sends out a FIN packet. However, it does not wait until it is acknowledged by the peer.</p>
<p><em>deadline</em> is a point in time when the operation should time out. Use the <strong>now()</strong> function to get your current point in time. 0 means immediate timeout, i.e., perform the operation if possible or return without blocking if not. -1 means no deadline, i.e., the call will block forever if the operation cannot be performed.</p>
<p>After <strong>hdone</strong> is called on a handle, any attempts to send more data to the handle will result in <strong>EPIPE</strong> error.</p>
<p>Handle implementation may also decide to prevent any further receiving of data and return <strong>EPIPE</strong> error instead.</p>
<h1 id="return-value">RETURN VALUE</h1>
<p>The function returns 0 on success. On error, it returns -1 and sets <em>errno</em> to one of the following values.</p>
<h1 id="errors">ERRORS</h1>
<ul>
<li><strong>EBADF</strong>: Not a valid handle.</li>
<li><strong>ENOTSUP</strong>: Operation not supported.</li>
<li><strong>EPIPE</strong>: Pipe broken. Possibly, <strong>hdone</strong> has already been called for this channel.</li>
<li><strong>ETIMEDOUT</strong>: Deadline was reached.</li>
</ul>
<h1 id="example">EXAMPLE</h1>
<div class="sourceCode"><pre class="sourceCode c"><code class="sourceCode c"><span class="dt">int</span> rc = hdone(h);</code></pre></div>
</body>
